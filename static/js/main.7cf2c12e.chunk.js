(this["webpackJsonpreact-canvas"]=this["webpackJsonpreact-canvas"]||[]).push([[0],[,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var c=n(1),a=n.n(c),r=n(4),s=n.n(r),i=(n(9),n(2));n(10);function o(t,e,n,c){e.forEach((function(e){switch(e[0]){case"path":!function(t,e,n,c){t.strokeStyle=c[1],t.lineWidth=c[2],t.beginPath(),t.moveTo(c[3][0]*e,c[3][1]*n);for(var a=4;a<c.length;a++)t.lineTo(c[a][0]*e,c[a][1]*n);t.stroke()}(t,n,c,e);break;default:console.error("undefined thingy")}}))}n(11);var h=n(0);function u(t){var e=t.transparent,n=t.setTransparent;return Object(h.jsx)("span",{children:Object(h.jsxs)("label",{children:["Transparent background?",Object(h.jsx)("input",{type:"checkbox",onChange:function(t){n(!e)},checked:e})]})})}function l(t){var e=t.paths,n=t.setPaths,a=t.setActive,r=Object(c.useCallback)((function(){var t=e.slice();t.push([]),a(t.length-1),n(t)}),[e,n,a]);return Object(h.jsx)("button",{onClick:r,children:"Add Layer"})}function j(t){var e=t.brushSize,n=t.setBrushSize;return Object(h.jsxs)("span",{children:[Object(h.jsx)("label",{children:"Brush Size:"}),Object(h.jsx)("input",{type:"number",value:e,onChange:function(t){n(t.target.value)}})]})}function b(t){var e=t.paths,n=t.width,a=t.height,r=t.backgroundColor,s=t.transparent,i=Object(c.useRef)(),u=document.createElement("canvas");u.width=n,u.height=a;var l=u.getContext("2d");return s||(l.fillStyle=r,l.fillRect(0,0,n,a)),e.forEach((function(t){o(l,t,n,a)})),Object(h.jsx)("a",{ref:i,href:"/#",download:"canvas.png",children:Object(h.jsx)("button",{onClick:function(){var t=u.toDataURL("image/png").replace("image/png","image/octet-stream");i.current.setAttribute("href",t)},children:"Download Canvas"})})}function d(t){var e=t.color,n=t.setColor;return Object(h.jsx)("input",{className:"color-chooser",type:"color",value:e,onChange:function(t){n(t.target.value)}})}function f(t){var e=t.backgroundColor,n=t.setBackgroundColor;return Object(h.jsxs)("span",{children:["Background Color:",Object(h.jsx)(d,{color:e,setColor:n})]})}var v=function(t){var e=t.paths,n=t.setPaths,c=t.setActive,a=t.brushSize,r=t.setBrushSize,s=t.color,i=t.setColor,o=t.backgroundColor,v=t.setBackgroundColor,O=t.transparent,g=t.setTransparent,p=t.width,x=t.height;return Object(h.jsxs)("div",{className:"canvas-control",children:[Object(h.jsx)(u,{transparent:O,setTransparent:g}),!O&&Object(h.jsx)(f,{backgroundColor:o,setBackgroundColor:v}),Object(h.jsx)(l,{paths:e,setPaths:n,setActive:c}),Object(h.jsx)(j,{brushSize:a,setBrushSize:r}),Object(h.jsx)(d,{color:s,setColor:i}),Object(h.jsx)(b,{paths:e,width:p,height:x,backgroundColor:o,transparent:O})]})};n(13);function O(t){var e=t.width,n=t.height,a=t.paths,r=t.index,s=t.active,i=t.setActive,u=Object(c.useRef)(),l=Object(c.useCallback)((function(){i(r)}),[i,r]);return Object(c.useEffect)((function(){o(u.current.getContext("2d"),a[r],e,n)}),[a,e,n,u,r]),Object(h.jsx)("canvas",{className:"mini-layer ".concat(s&&"active"),ref:u,width:e,height:n,onClick:l})}var g=function(t){var e=t.paths,n=t.width,c=t.height,a=t.active,r=t.setActive,s=e.map((function(t,s){return Object(h.jsx)(O,{width:n,height:c,paths:e,active:a===s,setActive:r,index:s},s)}));return Object(h.jsx)("div",{className:"mini-layers-display",children:s})};n(14);function p(t){var e=t.width,n=t.height,a=t.color,r=t.transparent,s=Object(c.useRef)();return Object(c.useEffect)((function(){var t=s.current.getContext("2d");r?t.clearRect(0,0,e,n):(t.fillStyle=a,t.fillRect(0,0,e,n))})),Object(h.jsx)("canvas",{className:"layer",ref:s,"z-index":-1,width:e,height:n})}function x(t){var e=t.width,n=t.height,a=t.color,r=t.brushSize,s=t.paths,i=t.setPaths,u=t.index,l=(t.active,Object(c.useRef)()),j=Object(c.useCallback)((function(t){if(1&t.buttons){var c=s.slice();c[u].push(["path",a,r,[t.nativeEvent.offsetX/e,t.nativeEvent.offsetY/n]]),i(c)}}),[s,a,r,e,n,i,u]),b=Object(c.useCallback)((function(t){1&t.buttons&&function(t,e,n,c,a,r){var s=c.slice();s[r][s[r].length-1].push([t.nativeEvent.offsetX/e,t.nativeEvent.offsetY/n]),a(s)}(t,e,n,s,i,u)}),[e,n,s,i,u]);return Object(c.useEffect)((function(){o(l.current.getContext("2d"),s[u],e,n)}),[s,e,n,l,u]),Object(h.jsx)("canvas",{className:"layer","z-index":u,ref:l,width:e,height:n,onMouseDown:j,onMouseMove:b})}var w=function(t){var e=t.width,n=t.height,a=Object(c.useState)("#000000"),r=Object(i.a)(a,2),s=r[0],o=r[1],u=Object(c.useState)(5),l=Object(i.a)(u,2),j=l[0],b=l[1],d=Object(c.useState)([[]]),f=Object(i.a)(d,2),O=f[0],w=f[1],C=Object(c.useState)(),k=Object(i.a)(C,2),S=k[0],m=k[1],y=Object(c.useState)("#ffffff"),z=Object(i.a)(y,2),B=z[0],A=z[1],E=Object(c.useState)(!0),N=Object(i.a)(E,2),P=N[0],T=N[1],R=O.map((function(t,c){return Object(h.jsx)(x,{active:S===c,width:e,height:n,brushSize:j,color:s,paths:O,setPaths:w,index:c},c)}));return R.push(R.splice(S,1)),Object(h.jsxs)("div",{className:"canvas",children:[Object(h.jsxs)("div",{className:"canvas-container",children:[Object(h.jsx)(v,{paths:O,setPaths:w,setActive:m,brushSize:j,setBrushSize:b,color:s,setColor:o,backgroundColor:B,setBackgroundColor:A,transparent:P,setTransparent:T,width:e,height:n}),Object(h.jsxs)("div",{id:"layer-container",width:1.25*e,height:1.25*n,children:[Object(h.jsx)(p,{width:e,height:n,color:B,transparent:P}),R]})]}),Object(h.jsx)(g,{paths:O,width:e/10,height:n/10,active:S,setActive:m})]})};var C=function(){var t=.8,e=Object(c.useState)(window.outerHeight*t*1.5),n=Object(i.a)(e,2),a=n[0],r=n[1],s=Object(c.useState)(window.outerHeight*t),o=Object(i.a)(s,2),u=o[0],l=o[1];return window.onresize=function(){r(window.outerHeight*t*1.5),l(window.outerHeight*t)},Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(w,{width:a,height:u})})},k=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,16)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,r=e.getLCP,s=e.getTTFB;n(t),c(t),a(t),r(t),s(t)}))};s.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(C,{})}),document.getElementById("root")),k()}],[[15,1,2]]]);
//# sourceMappingURL=main.7cf2c12e.chunk.js.map