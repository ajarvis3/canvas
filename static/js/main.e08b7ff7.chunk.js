(this["webpackJsonpreact-canvas"]=this["webpackJsonpreact-canvas"]||[]).push([[0],[,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var c=n(1),i=n.n(c),a=n(4),s=n.n(a),r=(n(9),n(2));n(10);function o(t,e,n,c){e.forEach((function(e){switch(e[0]){case"path":!function(t,e,n,c){t.strokeStyle=c[1],t.lineWidth=c[2],t.beginPath(),t.moveTo(c[3][0]*e,c[3][1]*n);for(var i=4;i<c.length;i++)t.lineTo(c[i][0]*e,c[i][1]*n);t.stroke()}(t,n,c,e);break;default:console.error("undefined thingy")}}))}n(11);var h=n(0);function u(t){var e=t.paths,n=t.setPaths,i=t.setActive,a=Object(c.useCallback)((function(){var t=e.slice();t.push([]),i(t.length-1),n(t)}),[e,n,i]);return Object(h.jsx)("button",{onClick:a,children:"Add Layer"})}function l(t){var e=t.brushSize,n=t.setBrushSize;return Object(h.jsxs)("span",{children:[Object(h.jsx)("label",{children:"Brush Size:"}),Object(h.jsx)("input",{type:"number",value:e,onChange:function(t){n(t.target.value)}})]})}function j(t){var e=t.paths,n=t.width,i=t.height,a=t.backgroundColor,s=Object(c.useRef)(),r=document.createElement("canvas");r.width=n,r.height=i;var u=r.getContext("2d");return u.fillStyle=a,u.fillRect(0,0,n,i),e.forEach((function(t){o(u,t,n,i)})),Object(h.jsx)("a",{ref:s,href:"/#",download:"canvas.png",children:Object(h.jsx)("button",{onClick:function(){var t=r.toDataURL("image/png").replace("image/png","image/octet-stream");s.current.setAttribute("href",t)},children:"Download Canvas"})})}function b(t){var e=t.color,n=t.setColor;return Object(h.jsx)("input",{className:"color-chooser",type:"color",value:e,onChange:function(t){n(t.target.value)}})}var f=function(t){var e=t.paths,n=t.setPaths,c=t.setActive,i=t.brushSize,a=t.setBrushSize,s=t.color,r=t.setColor,o=t.backgroundColor,f=t.setBackgroundColor,d=t.width,v=t.height;return Object(h.jsxs)("div",{className:"canvas-control",children:["Background Color:",Object(h.jsx)(b,{color:o,setColor:f}),Object(h.jsx)(u,{paths:e,setPaths:n,setActive:c}),Object(h.jsx)(l,{brushSize:i,setBrushSize:a}),Object(h.jsx)(b,{color:s,setColor:r}),Object(h.jsx)(j,{paths:e,width:d,height:v,backgroundColor:o})]})};n(13);function d(t){var e=t.width,n=t.height,i=t.paths,a=t.index,s=t.active,r=t.setActive,u=Object(c.useRef)(),l=Object(c.useCallback)((function(){r(a)}),[r,a]);return Object(c.useEffect)((function(){o(u.current.getContext("2d"),i[a],e,n)}),[i,e,n,u,a]),Object(h.jsx)("canvas",{className:"mini-layer ".concat(s&&"active"),ref:u,width:e,height:n,onClick:l})}var v=function(t){var e=t.paths,n=t.width,c=t.height,i=t.active,a=t.setActive,s=e.map((function(t,s){return Object(h.jsx)(d,{width:n,height:c,paths:e,active:i===s,setActive:a,index:s},s)}));return Object(h.jsx)("div",{className:"mini-layers-display",children:s})};n(14);function g(t){var e=t.width,n=t.height,i=t.color,a=Object(c.useRef)();return Object(c.useEffect)((function(){var t=a.current.getContext("2d");t.fillStyle=i,t.fillRect(0,0,e,n)})),Object(h.jsx)("canvas",{className:"layer",ref:a,"z-index":-1,width:e,height:n})}function O(t){var e=t.width,n=t.height,i=t.color,a=t.brushSize,s=t.paths,r=t.setPaths,u=t.index,l=t.active,j=Object(c.useRef)(),b=Object(c.useCallback)((function(t){if(1&t.buttons){var c=s.slice();c[u].push(["path",i,a,[t.nativeEvent.offsetX/e,t.nativeEvent.offsetY/n]]),r(c)}}),[s,i,a,e,n,r,u]),f=Object(c.useCallback)((function(t){1&t.buttons&&function(t,e,n,c,i,a){var s=c.slice();s[a][s[a].length-1].push([t.nativeEvent.offsetX/e,t.nativeEvent.offsetY/n]),i(s)}(t,e,n,s,r,u)}),[e,n,s,r,u]);return Object(c.useEffect)((function(){o(j.current.getContext("2d"),s[u],e,n)}),[s,e,n,j,u]),Object(h.jsx)("canvas",{className:"layer","z-index":l?s.length:u,ref:j,width:e,height:n,onMouseDown:b,onMouseMove:f})}var x=function(t){var e=t.width,n=t.height,i=Object(c.useState)("#000000"),a=Object(r.a)(i,2),s=a[0],o=a[1],u=Object(c.useState)(5),l=Object(r.a)(u,2),j=l[0],b=l[1],d=Object(c.useState)([[]]),x=Object(r.a)(d,2),p=x[0],w=x[1],C=Object(c.useState)(),m=Object(r.a)(C,2),S=m[0],k=m[1],y=Object(c.useState)("#ffffff"),z=Object(r.a)(y,2),A=z[0],E=z[1],B=p.map((function(t,c){return Object(h.jsx)(O,{active:S===c,width:e,height:n,brushSize:j,color:s,paths:p,setPaths:w,index:c},c)}));return B.push(B.splice(S,1)),Object(h.jsxs)("div",{className:"canvas",children:[Object(h.jsxs)("div",{className:"canvas-container",children:[Object(h.jsx)(f,{paths:p,setPaths:w,setActive:k,brushSize:j,setBrushSize:b,color:s,setColor:o,backgroundColor:A,setBackgroundColor:E,width:e,height:n}),Object(h.jsxs)("div",{id:"layer-container",width:1.25*e,height:1.25*n,children:[Object(h.jsx)(g,{width:e,height:n,color:A}),B]})]}),Object(h.jsx)(v,{paths:p,width:e/10,height:n/10,active:S,setActive:k})]})};var p=function(){var t=.8,e=Object(c.useState)(window.outerHeight*t*1.5),n=Object(r.a)(e,2),i=n[0],a=n[1],s=Object(c.useState)(window.outerHeight*t),o=Object(r.a)(s,2),u=o[0],l=o[1];return window.onresize=function(){a(window.outerHeight*t*1.5),l(window.outerHeight*t)},Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(x,{width:i,height:u})})},w=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,16)).then((function(e){var n=e.getCLS,c=e.getFID,i=e.getFCP,a=e.getLCP,s=e.getTTFB;n(t),c(t),i(t),a(t),s(t)}))};s.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(p,{})}),document.getElementById("root")),w()}],[[15,1,2]]]);
//# sourceMappingURL=main.e08b7ff7.chunk.js.map