(this["webpackJsonpreact-canvas"]=this["webpackJsonpreact-canvas"]||[]).push([[0],[,,,,,function(e,t,n){},,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(2),c=n.n(s),a=n(8),r=n.n(a),i=(n(13),n(3));n(14);function o(e,t,n){e.strokeStyle=t[1],e.lineWidth=t[2]*n,e.beginPath()}function h(e,t,n,s,c){o(e,s,c),e.moveTo(s[3][0]*t,s[3][1]*n);for(var a=4;a<s.length;a++)e.lineTo(s[a][0]*t,s[a][1]*n)}function u(e,t,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;h(e,t,n,s,c),e.stroke()}function l(e,t,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;h(e,t,n,s,c),e.closePath(),e.stroke()}function j(e,t,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;o(e,s,c);var a=s[3][0]*t,r=s[3][1]*n,i=s[4][0]*t-a,h=s[4][1]*n-r;e.rect(a,r,i,h),e.stroke()}function b(e,t,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;o(e,s,c);var a=(s[4][0]*t-s[3][0]*t)/2,r=(s[4][1]*n-s[3][1]*n)/2,i=s[3][0]*t+a,h=s[3][1]*n+r;e.ellipse(i,h,Math.abs(a),Math.abs(r),0,0,2*Math.PI),e.stroke()}function f(e,t,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(0!==s.length)switch(s[0]){case"Brush":u(e,t,n,s,c);break;case"Polygon":l(e,t,n,s,c);break;case"Rectangle":j(e,t,n,s,c);break;case"Ellipse":b(e,t,n,s,c);break;default:console.error("undefined thingy")}}function v(e,t,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;0!==t.length&&t.forEach((function(t){f(e,n,s,t,c)}))}function d(e,t,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;t.forEach((function(t){v(e,t,n,s,c)}))}n(5);var p=n(1);function O(e){var t=e.color,n=e.setColor,s=e.tipText;return Object(p.jsxs)("span",{className:"icon-container",children:[Object(p.jsx)("input",{className:"color-chooser",type:"color",value:t,onChange:function(e){n(e.target.value)}}),Object(p.jsx)("span",{className:"tooltiptext",children:s})]})}var g=n(4);function x(e){var t=e.transparent,n=e.setTransparent;return Object(p.jsxs)("span",{className:"icon-container",onClick:function(){n(!t)},children:[t?Object(p.jsx)(g.b,{}):Object(p.jsx)(g.c,{}),Object(p.jsx)("span",{className:"tooltiptext",children:"Transparent Background?"})]})}var C=function(e){var t=e.transparent,n=e.setTransparent,s=e.backgroundColor,c=e.setBackgroundColor;return Object(p.jsxs)("span",{children:[Object(p.jsx)(x,{transparent:t,setTransparent:n}),!t&&Object(p.jsx)(O,{color:s,setColor:c,tipText:"Background Color"})]})},m=(n(16),n(6)),k=[["Brush",Object(p.jsx)(g.a,{})],["Polygon",Object(p.jsx)(m.b,{})],["Ellipse",Object(p.jsx)(m.a,{})],["Rectangle",Object(p.jsx)(m.c,{})]];function w(e){var t=e.brushSize,n=e.setBrushSize;return Object(p.jsxs)("span",{children:[Object(p.jsx)("label",{children:"Brush Size:"}),Object(p.jsx)("input",{type:"number",value:t,onChange:function(e){n(e.target.value)}})]})}function y(e){var t=e.active,n=e.brush,s=e.setBrush;return Object(p.jsxs)("span",{className:"brush-container",onClick:s,children:[n[1],!t&&Object(p.jsx)("span",{className:"tooltiptext",children:n[0]})]})}function S(e){var t=e.brushType,n=e.setBrushType,s=k.map((function(e,t){return Object(p.jsx)(y,{brush:e,setBrush:function(){return n(e)}},t)}));return Object(p.jsxs)("span",{className:"brush-chooser",children:[Object(p.jsx)(y,{brush:t,setBrush:function(){},active:!0}),Object(p.jsx)("span",{className:"brushes",children:s})]})}var B=function(e){var t=e.brushSize,n=e.setBrushSize,s=e.color,c=e.setColor,a=e.brushType,r=e.setBrushType;return Object(p.jsxs)("span",{children:[Object(p.jsx)(S,{brushType:a,setBrushType:r}),Object(p.jsx)(w,{brushSize:t,setBrushSize:n}),Object(p.jsx)(O,{color:s,setColor:c,tipText:"Brush Color"})]})};function T(e){var t=e.paths,n=e.width,c=e.height,a=e.backgroundColor,r=e.transparent,i=Object(s.useRef)(),o=document.createElement("canvas");o.width=n,o.height=c;var h=o.getContext("2d");return r||(h.fillStyle=a,h.fillRect(0,0,n,c)),d(h,t,n,c),Object(p.jsxs)("a",{ref:i,href:"/#",download:"canvas.png",className:"icon-container",children:[Object(p.jsx)(g.d,{onClick:function(){var e=o.toDataURL("image/png").replace("image/png","image/octet-stream");i.current.setAttribute("href",e)}}),Object(p.jsx)("span",{className:"tooltiptext",children:"Download"})]})}var E=function(e){var t=e.paths,n=e.width,s=e.height,c=e.backgroundColor,a=e.transparent;return Object(p.jsx)("span",{children:Object(p.jsx)(T,{paths:t,width:n,height:s,backgroundColor:c,transparent:a})})};function N(e){var t=e.paths,n=e.setPaths,c=e.setActive,a=Object(s.useCallback)((function(){var e=t.slice();e.push([]),c(e.length-1),n(e)}),[t,n,c]);return Object(p.jsxs)("span",{className:"icon-container",onClick:a,children:[Object(p.jsx)(g.e,{}),Object(p.jsx)("span",{className:"tooltiptext",children:"Add a Layer"})]})}var z=function(e){var t=e.paths,n=e.setPaths,s=e.setActive;return Object(p.jsx)("span",{children:Object(p.jsx)(N,{paths:t,setPaths:n,setActive:s})})};var P=function(e){var t=e.paths,n=e.setPaths,s=e.setActive,c=e.brushSize,a=e.setBrushSize,r=e.color,i=e.setColor,o=e.backgroundColor,h=e.setBackgroundColor,u=e.transparent,l=e.setTransparent,j=e.width,b=e.height,f=e.brushType,v=e.setBrushType;return Object(p.jsxs)("div",{className:"canvas-control",children:[Object(p.jsx)(C,{transparent:u,setTransparent:l,backgroundColor:o,setBackgroundColor:h}),Object(p.jsx)(z,{paths:t,setPaths:n,setActive:s}),Object(p.jsx)(B,{brushSize:c,setBrushSize:a,brushType:f,setBrushType:v,color:r,setColor:i}),Object(p.jsx)(E,{paths:t,width:j,height:b,backgroundColor:o,transparent:u})]})};n(17);function R(e){var t=e.width,n=e.height,c=e.paths,a=e.index,r=e.active,i=e.setActive,o=Object(s.useRef)(),h=Object(s.useCallback)((function(){i(a)}),[i,a]);return Object(s.useEffect)((function(){var e=o.current.getContext("2d");e.clearRect(0,0,t,n),v(e,c[a],t,n,.1)}),[c,t,n,o,a]),Object(p.jsx)("canvas",{className:"mini-layer ".concat(r&&"active"),ref:o,width:t,height:n,onClick:h})}var A=function(e){var t=e.paths,n=e.width,s=e.height,c=e.active,a=e.setActive,r=t.map((function(e,r){return Object(p.jsx)(R,{width:n,height:s,paths:t,active:c===r,setActive:a,index:r},r)}));return Object(p.jsx)("div",{className:"mini-layers-display",children:r})};n(18);function M(e){var t=e.width,n=e.height,c=e.color,a=e.transparent,r=Object(s.useRef)();return Object(s.useEffect)((function(){var e=r.current.getContext("2d");a?e.clearRect(0,0,t,n):(e.fillStyle=c,e.fillRect(0,0,t,n))})),Object(p.jsx)("canvas",{className:"layer",ref:r,"z-index":0,width:t,height:n})}function X(e){var t=e.width,n=e.height,c=e.color,a=e.brushSize,r=e.path,i=e.setPath,o=e.paths,h=e.setPaths,u=e.index,l=e.brushType,j=Object(s.useRef)(),b=Object(s.useCallback)((function(e){var s;1&e.buttons&&("Brush"===l[0]||"Polygon"===l[0]?s=[l[0],c,a,[e.nativeEvent.offsetX/t,e.nativeEvent.offsetY/n]]:"Rectangle"!==l[0]&&"Ellipse"!==l[0]||(s=[l[0],c,a,[e.nativeEvent.offsetX/t,e.nativeEvent.offsetY/n],[e.nativeEvent.offsetX/t,e.nativeEvent.offsetY/n]]),i(s))}),[c,a,t,n,i,l]),v=Object(s.useCallback)((function(e){1&e.buttons&&("Brush"===l[0]||"Polygon"===l[0]?function(e,t,n,s,c){var a=s.slice();a.push([e.nativeEvent.offsetX/t,e.nativeEvent.offsetY/n]),c(a)}(e,t,n,r,i):"Rectangle"!==l[0]&&"Ellipse"!==l[0]||function(e,t,n,s,c){var a=s.slice();a[4]=[e.nativeEvent.offsetX/t,e.nativeEvent.offsetY/n],c(a)}(e,t,n,r,i))}),[t,n,r,i,l]),d=Object(s.useCallback)((function(e){var t=o.slice();t[u].push(r),h(t),i([])}),[r,i,o,h,u]);return Object(s.useEffect)((function(){var e=j.current.getContext("2d");e.clearRect(0,0,t,n),f(e,t,n,r)}),[r,t,n,j]),Object(p.jsx)("canvas",{className:"layer","z-index":2,ref:j,width:t,height:n,onMouseDown:b,onMouseMove:v,onMouseUp:d})}function Y(e){var t=e.width,n=e.height,c=e.paths,a=Object(s.useRef)();return Object(s.useEffect)((function(){var e=a.current.getContext("2d");e.clearRect(0,0,t,n),d(e,c,t,n)}),[c,t,n,a]),Object(p.jsx)("canvas",{className:"layer","z-index":1,ref:a,width:t,height:n})}var D=function(e){var t=e.width,n=e.height,c=Object(s.useState)("#000000"),a=Object(i.a)(c,2),r=a[0],o=a[1],h=Object(s.useState)(5),u=Object(i.a)(h,2),l=u[0],j=u[1],b=Object(s.useState)(k[0]),f=Object(i.a)(b,2),v=f[0],d=f[1],O=Object(s.useState)([]),g=Object(i.a)(O,2),x=g[0],C=g[1],m=Object(s.useState)([[]]),w=Object(i.a)(m,2),y=w[0],S=w[1],B=Object(s.useState)(0),T=Object(i.a)(B,2),E=T[0],N=T[1],z=Object(s.useState)("#ffffff"),R=Object(i.a)(z,2),D=R[0],F=R[1],L=Object(s.useState)(!0),I=Object(i.a)(L,2),W=I[0],H=I[1];return Object(p.jsxs)("div",{className:"canvas",children:[Object(p.jsxs)("div",{className:"canvas-container",children:[Object(p.jsx)(P,{paths:y,setPaths:S,setActive:N,brushSize:l,setBrushSize:j,color:r,setColor:o,backgroundColor:D,setBackgroundColor:F,transparent:W,setTransparent:H,width:t,height:n,brushType:v,setBrushType:d}),Object(p.jsxs)("div",{id:"layer-container",width:1.25*t,height:1.25*n,children:[Object(p.jsx)(M,{width:t,height:n,color:D,transparent:W}),Object(p.jsx)(Y,{width:t,height:n,paths:y,index:E}),Object(p.jsx)(X,{width:t,height:n,color:r,brushSize:l,path:x,setPath:C,paths:y,setPaths:S,index:E,brushType:v})]})]}),Object(p.jsx)(A,{paths:y,width:t/10,height:n/10,active:E,setActive:N})]})};var F=function(){var e=Object(s.useState)(0),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(0),r=Object(i.a)(a,2),o=r[0],h=r[1];function u(){var e=window.document.body,t=1.5*e.clientHeight>e.clientWidth?2*e.clientWidth/3:e.clientHeight;c(.75*t*1.5),h(.75*t)}return window.onresize=function(){u()},Object(s.useEffect)((function(){u()}),[]),Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(D,{width:n,height:o})})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),s(e),c(e),a(e),r(e)}))};r.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(F,{})}),document.getElementById("root")),L()}],[[19,1,2]]]);
//# sourceMappingURL=main.9ffb86ed.chunk.js.map