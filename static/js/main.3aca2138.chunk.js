(this["webpackJsonpreact-canvas"]=this["webpackJsonpreact-canvas"]||[]).push([[0],[,,,,,function(e,t,n){},,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(2),c=n.n(s),a=n(8),r=n.n(a),i=(n(13),n(3));n(14);function o(e,t,n){e.strokeStyle=t[1],e.lineWidth=t[2]*n,e.beginPath()}function h(e,t,n,s,c){o(e,s,c),e.moveTo(s[3][0]*t,s[3][1]*n);for(var a=4;a<s.length;a++)e.lineTo(s[a][0]*t,s[a][1]*n)}function u(e,t,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;h(e,t,n,s,c),e.stroke()}function l(e,t,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;h(e,t,n,s,c),e.closePath(),e.stroke()}function j(e,t,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;o(e,s,c);var a=s[3][0]*t,r=s[3][1]*n,i=s[4][0]*t-a,h=s[4][1]*n-r;e.rect(a,r,i,h),e.stroke()}function b(e,t,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;e.clearRect(0,0,n,s),t.forEach((function(t){switch(t[0]){case"Brush":u(e,n,s,t,c);break;case"Polygon":l(e,n,s,t,c);break;case"Rectangle":j(e,n,s,t,c);break;default:console.error("undefined thingy")}}))}n(5);var f=n(1);function v(e){var t=e.color,n=e.setColor,s=e.tipText;return Object(f.jsxs)("span",{className:"icon-container",children:[Object(f.jsx)("input",{className:"color-chooser",type:"color",value:t,onChange:function(e){n(e.target.value)}}),Object(f.jsx)("span",{className:"tooltiptext",children:s})]})}var d=n(4);function p(e){var t=e.transparent,n=e.setTransparent;return Object(f.jsxs)("span",{className:"icon-container",onClick:function(){n(!t)},children:[t?Object(f.jsx)(d.b,{}):Object(f.jsx)(d.c,{}),Object(f.jsx)("span",{className:"tooltiptext",children:"Transparent Background?"})]})}var O=function(e){var t=e.transparent,n=e.setTransparent,s=e.backgroundColor,c=e.setBackgroundColor;return Object(f.jsxs)("span",{children:[Object(f.jsx)(p,{transparent:t,setTransparent:n}),!t&&Object(f.jsx)(v,{color:s,setColor:c,tipText:"Background Color"})]})},x=(n(16),n(6)),g=[["Brush",Object(f.jsx)(d.a,{})],["Polygon",Object(f.jsx)(x.b,{})],["Circle",Object(f.jsx)(x.a,{})],["Rectangle",Object(f.jsx)(x.c,{})]];function C(e){var t=e.brushSize,n=e.setBrushSize;return Object(f.jsxs)("span",{children:[Object(f.jsx)("label",{children:"Brush Size:"}),Object(f.jsx)("input",{type:"number",value:t,onChange:function(e){n(e.target.value)}})]})}function m(e){var t=e.active,n=e.brush,s=e.setBrush;return Object(f.jsxs)("span",{className:"brush-container",onClick:s,children:[n[1],!t&&Object(f.jsx)("span",{className:"tooltiptext",children:n[0]})]})}function y(e){var t=e.brushType,n=e.setBrushType,s=g.map((function(e,t){return Object(f.jsx)(m,{brush:e,setBrush:function(){return n(e)}},t)}));return Object(f.jsxs)("span",{className:"brush-chooser",children:[Object(f.jsx)(m,{brush:t,setBrush:function(){},active:!0}),Object(f.jsx)("span",{className:"brushes",children:s})]})}var k=function(e){var t=e.brushSize,n=e.setBrushSize,s=e.color,c=e.setColor,a=e.brushType,r=e.setBrushType;return Object(f.jsxs)("span",{children:[Object(f.jsx)(y,{brushType:a,setBrushType:r}),Object(f.jsx)(C,{brushSize:t,setBrushSize:n}),Object(f.jsx)(v,{color:s,setColor:c,tipText:"Brush Color"})]})};function w(e){var t=e.paths,n=e.width,c=e.height,a=e.backgroundColor,r=e.transparent,i=Object(s.useRef)(),o=document.createElement("canvas");o.width=n,o.height=c;var h=o.getContext("2d");return r||(h.fillStyle=a,h.fillRect(0,0,n,c)),t.forEach((function(e){b(h,e,n,c)})),Object(f.jsxs)("a",{ref:i,href:"/#",download:"canvas.png",className:"icon-container",children:[Object(f.jsx)(d.d,{onClick:function(){var e=o.toDataURL("image/png").replace("image/png","image/octet-stream");i.current.setAttribute("href",e)}}),Object(f.jsx)("span",{className:"tooltiptext",children:"Download"})]})}var B=function(e){var t=e.paths,n=e.width,s=e.height,c=e.backgroundColor,a=e.transparent;return Object(f.jsx)("span",{children:Object(f.jsx)(w,{paths:t,width:n,height:s,backgroundColor:c,transparent:a})})};function S(e){var t=e.paths,n=e.setPaths,c=e.setActive,a=Object(s.useCallback)((function(){var e=t.slice();e.push([]),c(e.length-1),n(e)}),[t,n,c]);return Object(f.jsxs)("span",{className:"icon-container",onClick:a,children:[Object(f.jsx)(d.e,{}),Object(f.jsx)("span",{className:"tooltiptext",children:"Add a Layer"})]})}var T=function(e){var t=e.paths,n=e.setPaths,s=e.setActive;return Object(f.jsx)("span",{children:Object(f.jsx)(S,{paths:t,setPaths:n,setActive:s})})};var N=function(e){var t=e.paths,n=e.setPaths,s=e.setActive,c=e.brushSize,a=e.setBrushSize,r=e.color,i=e.setColor,o=e.backgroundColor,h=e.setBackgroundColor,u=e.transparent,l=e.setTransparent,j=e.width,b=e.height,v=e.brushType,d=e.setBrushType;return Object(f.jsxs)("div",{className:"canvas-control",children:[Object(f.jsx)(O,{transparent:u,setTransparent:l,backgroundColor:o,setBackgroundColor:h}),Object(f.jsx)(T,{paths:t,setPaths:n,setActive:s}),Object(f.jsx)(k,{brushSize:c,setBrushSize:a,brushType:v,setBrushType:d,color:r,setColor:i}),Object(f.jsx)(B,{paths:t,width:j,height:b,backgroundColor:o,transparent:u})]})};n(17);function z(e){var t=e.width,n=e.height,c=e.paths,a=e.index,r=e.active,i=e.setActive,o=Object(s.useRef)(),h=Object(s.useCallback)((function(){i(a)}),[i,a]);return Object(s.useEffect)((function(){b(o.current.getContext("2d"),c[a],t,n,.1)}),[c,t,n,o,a]),Object(f.jsx)("canvas",{className:"mini-layer ".concat(r&&"active"),ref:o,width:t,height:n,onClick:h})}var E=function(e){var t=e.paths,n=e.width,s=e.height,c=e.active,a=e.setActive,r=t.map((function(e,r){return Object(f.jsx)(z,{width:n,height:s,paths:t,active:c===r,setActive:a,index:r},r)}));return Object(f.jsx)("div",{className:"mini-layers-display",children:r})};n(18);function P(e){var t=e.width,n=e.height,c=e.color,a=e.transparent,r=Object(s.useRef)();return Object(s.useEffect)((function(){var e=r.current.getContext("2d");a?e.clearRect(0,0,t,n):(e.fillStyle=c,e.fillRect(0,0,t,n))})),Object(f.jsx)("canvas",{className:"layer",ref:r,"z-index":-1,width:t,height:n})}function A(e){var t=e.width,n=e.height,c=e.color,a=e.brushSize,r=e.paths,i=e.setPaths,o=e.index,h=(e.active,e.brushType),u=Object(s.useRef)(),l=Object(s.useCallback)((function(e){if(1&e.buttons){var s=r.slice();"Brush"===h[0]||"Polygon"===h[0]?s[o].push([h[0],c,a,[e.nativeEvent.offsetX/t,e.nativeEvent.offsetY/n]]):"Rectangle"===h[0]&&s[o].push([h[0],c,a,[e.nativeEvent.offsetX/t,e.nativeEvent.offsetY/n],[e.nativeEvent.offsetX/t,e.nativeEvent.offsetY/n]]),i(s)}}),[r,c,a,t,n,i,o,h]),j=Object(s.useCallback)((function(e){1&e.buttons&&("Brush"===h[0]||"Polygon"===h[0]?function(e,t,n,s,c,a){var r=s.slice();r[a][r[a].length-1].push([e.nativeEvent.offsetX/t,e.nativeEvent.offsetY/n]),c(r)}(e,t,n,r,i,o):"Rectangle"===h[0]&&function(e,t,n,s,c,a){var r=s.slice();r[a][r[a].length-1][4]=[e.nativeEvent.offsetX/t,e.nativeEvent.offsetY/n],c(r)}(e,t,n,r,i,o))}),[t,n,r,i,o,h]);return Object(s.useEffect)((function(){b(u.current.getContext("2d"),r[o],t,n)}),[r,t,n,u,o]),Object(f.jsx)("canvas",{className:"layer","z-index":o,ref:u,width:t,height:n,onMouseDown:l,onMouseMove:j})}var R=function(e){var t=e.width,n=e.height,c=Object(s.useState)("#000000"),a=Object(i.a)(c,2),r=a[0],o=a[1],h=Object(s.useState)(5),u=Object(i.a)(h,2),l=u[0],j=u[1],b=Object(s.useState)(g[0]),v=Object(i.a)(b,2),d=v[0],p=v[1],O=Object(s.useState)([[]]),x=Object(i.a)(O,2),C=x[0],m=x[1],y=Object(s.useState)(),k=Object(i.a)(y,2),w=k[0],B=k[1],S=Object(s.useState)("#ffffff"),T=Object(i.a)(S,2),z=T[0],R=T[1],X=Object(s.useState)(!0),Y=Object(i.a)(X,2),D=Y[0],F=Y[1],L=C.map((function(e,s){return Object(f.jsx)(A,{active:w===s,width:t,height:n,brushSize:l,color:r,paths:C,setPaths:m,index:s,brushType:d},s)}));return L.push(L.splice(w,1)),Object(f.jsxs)("div",{className:"canvas",children:[Object(f.jsxs)("div",{className:"canvas-container",children:[Object(f.jsx)(N,{paths:C,setPaths:m,setActive:B,brushSize:l,setBrushSize:j,color:r,setColor:o,backgroundColor:z,setBackgroundColor:R,transparent:D,setTransparent:F,width:t,height:n,brushType:d,setBrushType:p}),Object(f.jsxs)("div",{id:"layer-container",width:1.25*t,height:1.25*n,children:[Object(f.jsx)(P,{width:t,height:n,color:z,transparent:D}),L]})]}),Object(f.jsx)(E,{paths:C,width:t/10,height:n/10,active:w,setActive:B})]})};var X=function(){var e=Object(s.useState)(0),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(0),r=Object(i.a)(a,2),o=r[0],h=r[1];function u(){var e=window.document.body,t=1.5*e.clientHeight>e.clientWidth?2*e.clientWidth/3:e.clientHeight;c(.75*t*1.5),h(.75*t)}return window.onresize=function(){u()},Object(s.useEffect)((function(){u()}),[]),Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(R,{width:n,height:o})})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),s(e),c(e),a(e),r(e)}))};r.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(X,{})}),document.getElementById("root")),Y()}],[[19,1,2]]]);
//# sourceMappingURL=main.3aca2138.chunk.js.map